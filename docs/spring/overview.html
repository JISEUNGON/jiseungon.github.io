<!DOCTYPE html> <html lang="en"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <link rel="stylesheet" href="/assets/css/just-the-docs-head-nav.css" id="jtd-head-nav-stylesheet"> <style id="jtd-nav-activation"> .site-nav > ul.nav-list:first-child > li > a, .site-nav > ul.nav-list:first-child > li > ul > li:not(:nth-child(2)) > a, .site-nav > ul.nav-list:first-child > li > ul > li > ul > li a { background-image: none; } .site-nav > ul.nav-list:not(:first-child) a, .site-nav li.external a { background-image: none; } .site-nav > ul.nav-list:first-child > li:nth-child(5) > ul > li:nth-child(2) > a { font-weight: 600; text-decoration: none; }.site-nav > ul.nav-list:first-child > li:nth-child(5) > button svg, .site-nav > ul.nav-list:first-child > li:nth-child(5) > ul > li:nth-child(2) > button svg { transform: rotate(-90deg); }.site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(5) > ul.nav-list, .site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(5) > ul.nav-list > li.nav-list-item:nth-child(2) > ul.nav-list { display: block; } </style> <script src="/assets/js/vendor/lunr.min.js"></script> <script src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>Spring WebFlux Overview | Seungeon’s blog</title> <meta name="generator" content="Jekyll v3.10.0" /> <meta property="og:title" content="Spring WebFlux Overview" /> <meta property="og:locale" content="en" /> <meta property="og:site_name" content="Seungeon’s blog" /> <meta property="og:type" content="article" /> <meta property="article:published_time" content="2025-08-03T00:00:00+09:00" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Spring WebFlux Overview" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2025-08-03T00:00:00+09:00","datePublished":"2025-08-03T00:00:00+09:00","headline":"Spring WebFlux Overview","mainEntityOfPage":{"@type":"WebPage","@id":"/docs/spring/overview.html"},"url":"/docs/spring/overview.html"}</script> <!-- End Jekyll SEO tag --> </head> <body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE --> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"> <title id="svg-external-link-title">(external link)</title> <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <!-- Bootstrap Icons. MIT License: https://github.com/twbs/icons/blob/main/LICENSE.md --> <symbol id="svg-copy" viewBox="0 0 16 16"> <title>Copy</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/> <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/> </svg> </symbol> <symbol id="svg-copied" viewBox="0 0 16 16"> <title>Copied</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16"> <path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header" role="banner"> <a href="/" class="site-title lh-tight"> Seungeon's blog </a> <button id="menu-button" class="site-button btn-reset" aria-label="Toggle menu" aria-pressed="false"> <svg viewBox="0 0 24 24" class="icon" aria-hidden="true"><use xlink:href="#svg-menu"></use></svg> </button> </div> <nav aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Deploy category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/deploy/" class="nav-list-link">Deploy</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/deploy/rolling-update.html" class="nav-list-link">Rolling Update</a></li><li class="nav-list-item"><a href="/docs/deploy/blue-green.html" class="nav-list-link">Blue/Green Deployment</a></li><li class="nav-list-item"><a href="/docs/deploy/canary.html" class="nav-list-link">Canary Deployment</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Helm category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/helm/" class="nav-list-link">Helm</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/helm/command.html" class="nav-list-link">How-to-use-Helm</a></li><li class="nav-list-item"><a href="/docs/helm/concept.html" class="nav-list-link">What-is-Helm</a></li><li class="nav-list-item"><a href="/docs/helm/grammer.html" class="nav-list-link">How-to-write-helm-chart</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Jekyll category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/jekyll/" class="nav-list-link">Jekyll</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/jekyll/install-jekyll.html" class="nav-list-link">How to Install Jekyll</a></li><li class="nav-list-item"><a href="/docs/jekyll/just-the-docs.html" class="nav-list-link">How to use just-the-docs docs</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Kubernetes category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/k8s/" class="nav-list-link">Kubernetes</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/k8s/command.html" class="nav-list-link">How to use kubectl</a></li><li class="nav-list-item"><a href="/docs/k8s/concept.html" class="nav-list-link">What-is-Kubernetes</a></li><li class="nav-list-item"><a href="/docs/k8s/grammer.html" class="nav-list-link">How-to-write-helm-chart</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Kubernetes Components category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/k8s/componentes/" class="nav-list-link">Kubernetes Components</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/k8s/componentes/clusterrole.html" class="nav-list-link">ClusterRole</a></li><li class="nav-list-item"><a href="/docs/k8s/componentes/pod.html" class="nav-list-link">Pod</a></li><li class="nav-list-item"><a href="/docs/k8s/componentes/deployment.html" class="nav-list-link">Deployment</a></li><li class="nav-list-item"><a href="/docs/k8s/componentes/service.html" class="nav-list-link">Service</a></li><li class="nav-list-item"><a href="/docs/k8s/componentes/ingress.html" class="nav-list-link">Ingress</a></li><li class="nav-list-item"><a href="/docs/k8s/componentes/configmap.html" class="nav-list-link">ConfigMap</a></li><li class="nav-list-item"><a href="/docs/k8s/componentes/role.html" class="nav-list-link">Role</a></li><li class="nav-list-item"><a href="/docs/k8s/componentes/rolebinding.html" class="nav-list-link">RoleBinding</a></li><li class="nav-list-item"><a href="/docs/k8s/componentes/clusterrolebinding.html" class="nav-list-link">ClusterRoleBinding</a></li><li class="nav-list-item"><a href="/docs/k8s/componentes/serviceaccount.html" class="nav-list-link">ServiceAccount</a></li><li class="nav-list-item"><a href="/docs/k8s/componentes/statefulset.html" class="nav-list-link">StatefulSet</a></li><li class="nav-list-item"><a href="/docs/k8s/componentes/kube-system.html" class="nav-list-link">kube-system</a></li></ul></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Spring category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/spring/" class="nav-list-link">Spring</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/spring/api-gateway-webflux.html" class="nav-list-link">Spring boot gateway</a></li><li class="nav-list-item"><a href="/docs/spring/overview.html" class="nav-list-link">Spring WebFlux Overview</a></li><li class="nav-list-item"><a href="/docs/spring/webflux.html" class="nav-list-link">Spring WebFlux</a></li><li class="nav-list-item"><a href="/docs/spring/flux-mono.html" class="nav-list-link">Flux와 Mono 이해하기</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Markdown category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/diagram/" class="nav-list-link">Markdown</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/markdown/diagram.html" class="nav-list-link">How to make diagram in markdown</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Container category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/all-container/" class="nav-list-link">Container</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/all-container/container-runtime.html" class="nav-list-link">What-is-Container-Runtime</a></li><li class="nav-list-item"><a href="/docs/all-container/container.html" class="nav-list-link">What-is-Container</a></li><li class="nav-list-item"><a href="/docs/all-container/docker.html" class="nav-list-link">All-of-docker</a></li><li class="nav-list-item"><a href="/docs/all-container/registry.html" class="nav-list-link">Docker Registry</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Git category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/git/" class="nav-list-link">Git</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/git/command.html" class="nav-list-link">git-command</a></li><li class="nav-list-item"><a href="/docs/git/git-concepts.html" class="nav-list-link">Git 개념</a></li><li class="nav-list-item"><a href="/docs/git/git-filter-repo.html" class="nav-list-link">git-filter-repo</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Network category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/network/" class="nav-list-link">Network</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/network/3way-handshake.html" class="nav-list-link">3-Way Handshake</a></li><li class="nav-list-item"><a href="/docs/network/tcp-udp.html" class="nav-list-link">TCP vs UDP</a></li></ul></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search" role="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Seungeon's blog" aria-label="Search Seungeon's blog" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> </div> <div class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="/spring/">Spring</a></li> <li class="breadcrumb-nav-list-item"><span>Spring WebFlux Overview</span></li> </ol> </nav> <div id="main-content" class="main-content"> <main> <h1 id="spring-webflux-overview"> <a href="#spring-webflux-overview" class="anchor-heading" aria-labelledby="spring-webflux-overview"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Spring WebFlux Overview </h1> <h2 id="개요"> <a href="#개요" class="anchor-heading" aria-labelledby="개요"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 개요 </h2> <p>Spring WebFlux는 Spring Framework 5에서 도입된 반응형 웹 프레임워크로, 논블로킹 I/O와 리액티브 스트림을 기반으로 한다. 기존 Spring MVC와 함께 사용하거나 독립적으로 사용할 수 있으며, 고성능, 확장 가능한 웹 애플리케이션을 구축할 수 있습니다.</p> <h2 id="webflux가-생성된-이유"> <a href="#webflux가-생성된-이유" class="anchor-heading" aria-labelledby="webflux가-생성된-이유"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> WebFlux가 생성된 이유 </h2> <h3 id="1-논블로킹-웹-스택의-필요성"> <a href="#1-논블로킹-웹-스택의-필요성" class="anchor-heading" aria-labelledby="1-논블로킹-웹-스택의-필요성"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1. 논블로킹 웹 스택의 필요성 </h3> <ul> <li><strong>적은 수의 스레드로 동시성 처리</strong>: 이벤트 루프 모델을 통해 적은 하드웨어 리소스로 확장 가능</li> <li><strong>Servlet API의 한계</strong>: Servlet의 논블로킹 I/O가 기존 동기식 API와 충돌</li> <li><strong>새로운 공통 API 필요</strong>: 다양한 논블로킹 런타임을 지원하는 기반 API 필요</li> <li><strong>Netty 등 비동기 서버 지원</strong>: 이미 확립된 비동기, 논블로킹 서버들과의 호환성</li> </ul> <h3 id="2-함수형-프로그래밍의-도입"> <a href="#2-함수형-프로그래밍의-도입" class="anchor-heading" aria-labelledby="2-함수형-프로그래밍의-도입"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 2. 함수형 프로그래밍의 도입 </h3> <ul> <li><strong>Java 8 Lambda 표현식</strong>: 함수형 API 구현의 기회 창출</li> <li><strong>선언적 비동기 로직</strong>: CompletableFuture와 ReactiveX 스타일의 연속성 API</li> <li><strong>함수형 웹 엔드포인트</strong>: 어노테이션 기반 컨트롤러와 함께 함수형 엔드포인트 제공</li> </ul> <h2 id="reactive의-정의"> <a href="#reactive의-정의" class="anchor-heading" aria-labelledby="reactive의-정의"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> “Reactive”의 정의 </h2> <h3 id="1-반응형-프로그래밍-모델"> <a href="#1-반응형-프로그래밍-모델" class="anchor-heading" aria-labelledby="1-반응형-프로그래밍-모델"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1. 반응형 프로그래밍 모델 </h3> <ul> <li><strong>변화에 대한 반응</strong>: 네트워크 컴포넌트가 I/O 이벤트에 반응, UI 컨트롤러가 마우스 이벤트에 반응</li> <li><strong>논블로킹의 반응형 특성</strong>: 블로킹 대신 작업 완료나 데이터 가용성에 대한 알림에 반응</li> </ul> <h3 id="2-논블로킹-백프레셔"> <a href="#2-논블로킹-백프레셔" class="anchor-heading" aria-labelledby="2-논블로킹-백프레셔"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 2. 논블로킹 백프레셔 </h3> <ul> <li><strong>동기식 코드의 자연스러운 백프레셔</strong>: 블로킹 호출이 호출자를 대기시키는 자연스러운 형태</li> <li><strong>논블로킹 코드의 백프레셔 제어</strong>: 빠른 생산자가 목적지를 압도하지 않도록 이벤트 속도 제어</li> <li><strong>Reactive Streams</strong>: Java 9에서 채택된 작은 스펙으로 비동기 컴포넌트 간 상호작용 정의</li> </ul> <h3 id="3-reactive-streams의-목적"> <a href="#3-reactive-streams의-목적" class="anchor-heading" aria-labelledby="3-reactive-streams의-목적"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 3. Reactive Streams의 목적 </h3><pre><code class="language-mermaid">graph LR
    Publisher[Publisher&lt;br/&gt;데이터 생산자] --&gt; Subscriber[Subscriber&lt;br/&gt;데이터 구독자]
    Subscriber --&gt; Backpressure[Backpressure&lt;br/&gt;흐름 제어]

    subgraph "Reactive Streams"
        Publisher
        Subscriber
        Backpressure
    end
</code></pre><ul> <li><strong>구독자가 속도 제어</strong>: 구독자가 생산자의 데이터 생산 속도를 제어</li> <li><strong>상호운용성</strong>: 라이브러리와 인프라 컴포넌트 간의 상호운용성 제공</li> <li><strong>애플리케이션 API</strong>: 높은 수준의 함수형 API 필요</li> </ul> <h2 id="reactive-api"> <a href="#reactive-api" class="anchor-heading" aria-labelledby="reactive-api"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Reactive API </h2> <h3 id="1-reactor-라이브러리"> <a href="#1-reactor-라이브러리" class="anchor-heading" aria-labelledby="1-reactor-라이브러리"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1. Reactor 라이브러리 </h3> <ul> <li><strong>Spring WebFlux의 선택된 리액티브 라이브러리</strong></li> <li><strong>Mono와 Flux API</strong>: 0..1 (Mono) 및 0..N (Flux) 데이터 시퀀스 처리</li> <li><strong>ReactiveX 연산자</strong>: 풍부한 연산자 세트 제공</li> <li><strong>서버 사이드 Java</strong>: Spring과 긴밀한 협력으로 개발</li> </ul> <h3 id="2-상호운용성"> <a href="#2-상호운용성" class="anchor-heading" aria-labelledby="2-상호운용성"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 2. 상호운용성 </h3> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// WebFlux는 일반 Publisher를 입력으로 받아 Reactor 타입으로 내부 변환</span>
<span class="c1">// 출력은 Flux 또는 Mono로 반환</span>
<span class="nc">Mono</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="n">webFluxApi</span><span class="o">.</span><span class="na">accept</span><span class="o">(</span><span class="n">publisher</span><span class="o">);</span>
</code></pre></div></div> <ul> <li><strong>Reactive Streams 통한 상호운용</strong>: 다른 리액티브 라이브러리와 호환</li> <li><strong>투명한 적응</strong>: RxJava 등 다른 리액티브 라이브러리와 투명하게 적응</li> <li><strong>Kotlin Coroutines</strong>: Kotlin에서 더 명령형 스타일의 프로그래밍 제공</li> </ul> <h2 id="프로그래밍-모델"> <a href="#프로그래밍-모델" class="anchor-heading" aria-labelledby="프로그래밍-모델"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 프로그래밍 모델 </h2> <h3 id="1-어노테이션-기반-컨트롤러"> <a href="#1-어노테이션-기반-컨트롤러" class="anchor-heading" aria-labelledby="1-어노테이션-기반-컨트롤러"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1. 어노테이션 기반 컨트롤러 </h3> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@RestController</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">UserController</span> <span class="o">{</span>

    <span class="nd">@GetMapping</span><span class="o">(</span><span class="s">"/users/{id}"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="nc">Mono</span><span class="o">&lt;</span><span class="nc">User</span><span class="o">&gt;</span> <span class="nf">getUser</span><span class="o">(</span><span class="nd">@PathVariable</span> <span class="nc">String</span> <span class="n">id</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">userService</span><span class="o">.</span><span class="na">findById</span><span class="o">(</span><span class="n">id</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@GetMapping</span><span class="o">(</span><span class="s">"/users"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="nc">Flux</span><span class="o">&lt;</span><span class="nc">User</span><span class="o">&gt;</span> <span class="nf">getAllUsers</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">userService</span><span class="o">.</span><span class="na">findAll</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <ul> <li><strong>Spring MVC와 일관성</strong>: spring-web 모듈의 동일한 어노테이션 기반</li> <li><strong>리액티브 반환 타입</strong>: Reactor와 RxJava 반환 타입 지원</li> <li><strong>리액티브 @RequestBody</strong>: WebFlux만의 리액티브 요청 본문 인수 지원</li> </ul> <h3 id="2-함수형-엔드포인트"> <a href="#2-함수형-엔드포인트" class="anchor-heading" aria-labelledby="2-함수형-엔드포인트"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 2. 함수형 엔드포인트 </h3> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Configuration</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">RouterConfig</span> <span class="o">{</span>

    <span class="nd">@Bean</span>
    <span class="kd">public</span> <span class="nc">RouterFunction</span><span class="o">&lt;</span><span class="nc">ServerResponse</span><span class="o">&gt;</span> <span class="nf">userRoutes</span><span class="o">(</span><span class="nc">UserHandler</span> <span class="n">userHandler</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="nc">RouterFunctions</span>
            <span class="o">.</span><span class="na">route</span><span class="o">(</span><span class="no">GET</span><span class="o">(</span><span class="s">"/users/{id}"</span><span class="o">),</span> <span class="nl">userHandler:</span><span class="o">:</span><span class="n">getUser</span><span class="o">)</span>
            <span class="o">.</span><span class="na">andRoute</span><span class="o">(</span><span class="no">GET</span><span class="o">(</span><span class="s">"/users"</span><span class="o">),</span> <span class="nl">userHandler:</span><span class="o">:</span><span class="n">getAllUsers</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <ul> <li><strong>Lambda 기반</strong>: 경량화된 함수형 프로그래밍 모델</li> <li><strong>애플리케이션 제어</strong>: 어노테이션 선언 대신 애플리케이션이 요청 처리 전체 과정 제어</li> <li><strong>작은 라이브러리</strong>: 라우팅과 요청 처리를 위한 유틸리티 세트</li> </ul> <h2 id="적용-가능성-spring-mvc-vs-webflux"> <a href="#적용-가능성-spring-mvc-vs-webflux" class="anchor-heading" aria-labelledby="적용-가능성-spring-mvc-vs-webflux"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 적용 가능성: Spring MVC vs WebFlux </h2> <h3 id="1-선택-가이드"> <a href="#1-선택-가이드" class="anchor-heading" aria-labelledby="1-선택-가이드"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1. 선택 가이드 </h3><pre><code class="language-mermaid">graph TB
    subgraph "Spring MVC"
        MVC[기존 MVC 애플리케이션&lt;br/&gt;정상 작동]
        Imperative[명령형 프로그래밍&lt;br/&gt;쉬운 작성/이해/디버깅]
        Libraries[최대 라이브러리 선택&lt;br/&gt;대부분 블로킹]
    end

    subgraph "Spring WebFlux"
        NonBlocking[논블로킹 웹 스택&lt;br/&gt;필요]
        Functional[함수형 웹 프레임워크&lt;br/&gt;Java 8 Lambda/Kotlin]
        Microservices[마이크로서비스&lt;br/&gt;혼합 아키텍처]
    end

    style MVC fill:#e1f5fe
    style NonBlocking fill:#e8f5e8
    style Functional fill:#fff3e0
</code></pre><h3 id="2-구체적인-고려사항"> <a href="#2-구체적인-고려사항" class="anchor-heading" aria-labelledby="2-구체적인-고려사항"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 2. 구체적인 고려사항 </h3> <h4 id="spring-mvc를-선택해야-하는-경우"> <a href="#spring-mvc를-선택해야-하는-경우" class="anchor-heading" aria-labelledby="spring-mvc를-선택해야-하는-경우"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Spring MVC를 선택해야 하는 경우: </h4> <ul> <li><strong>기존 Spring MVC 애플리케이션</strong>: 정상 작동하는 경우 변경 불필요</li> <li><strong>명령형 프로그래밍</strong>: 코드 작성, 이해, 디버깅이 가장 쉬운 방법</li> <li><strong>최대 라이브러리 선택</strong>: 역사적으로 대부분이 블로킹 라이브러리</li> <li><strong>블로킹 지속성 API</strong>: JPA, JDBC 등 블로킹 API 사용 시</li> </ul> <h4 id="spring-webflux를-선택해야-하는-경우"> <a href="#spring-webflux를-선택해야-하는-경우" class="anchor-heading" aria-labelledby="spring-webflux를-선택해야-하는-경우"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Spring WebFlux를 선택해야 하는 경우: </h4> <ul> <li><strong>논블로킹 웹 스택 필요</strong>: 다른 논블로킹 스택과 동일한 실행 모델 이점</li> <li><strong>서버 선택</strong>: Netty, Tomcat, Jetty, Undertow, Servlet 컨테이너</li> <li><strong>프로그래밍 모델 선택</strong>: 어노테이션 컨트롤러와 함수형 웹 엔드포인트</li> <li><strong>리액티브 라이브러리 선택</strong>: Reactor, RxJava 또는 기타</li> <li><strong>경량 함수형 웹 프레임워크</strong>: Java 8 Lambda나 Kotlin 사용</li> <li><strong>마이크로서비스 아키텍처</strong>: Spring MVC와 WebFlux 혼합 사용</li> </ul> <h3 id="3-실용적-접근-방법"> <a href="#3-실용적-접근-방법" class="anchor-heading" aria-labelledby="3-실용적-접근-방법"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 3. 실용적 접근 방법 </h3> <h4 id="점진적-도입"> <a href="#점진적-도입" class="anchor-heading" aria-labelledby="점진적-도입"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 점진적 도입: </h4> <ol> <li><strong>기존 Spring MVC + WebClient</strong>: 원격 서비스 호출에 반응형 WebClient 사용</li> <li><strong>리액티브 타입 반환</strong>: Spring MVC 컨트롤러에서 직접 리액티브 타입 반환</li> <li><strong>작은 규모로 시작</strong>: 전체 전환 없이 작은 규모로 시작하고 이점 측정</li> <li><strong>학습 곡선 고려</strong>: 대규모 팀의 경우 논블로킹, 함수형, 선언적 프로그래밍의 가파른 학습 곡선 고려</li> </ol> <h2 id="서버-지원"> <a href="#서버-지원" class="anchor-heading" aria-labelledby="서버-지원"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 서버 지원 </h2> <h3 id="1-지원-서버"> <a href="#1-지원-서버" class="anchor-heading" aria-labelledby="1-지원-서버"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1. 지원 서버 </h3> <ul> <li><strong>Servlet 컨테이너</strong>: Tomcat, Jetty</li> <li><strong>비Servlet 런타임</strong>: Netty, Undertow</li> <li><strong>공통 API</strong>: 모든 서버가 저수준 공통 API로 적응</li> </ul> <h3 id="2-서버별-특성"> <a href="#2-서버별-특성" class="anchor-heading" aria-labelledby="2-서버별-특성"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 2. 서버별 특성 </h3><pre><code class="language-mermaid">graph TB
    subgraph "Spring MVC"
        MVCTomcat[Tomcat - Servlet 블로킹 I/O]
        MVCJetty[Jetty - Servlet 블로킹 I/O]
        MVCServlet[Servlet API 직접 사용]
    end

    subgraph "Spring WebFlux"
        FluxNetty[Netty - 비Servlet 런타임]
        FluxUndertow[Undertow - 직접 API 사용]
        FluxServlet[Servlet 논블로킹 I/O&lt;br/&gt;저수준 어댑터 사용]
    end

    style MVCServlet fill:#ffebee
    style FluxServlet fill:#e8f5e8
</code></pre><h3 id="3-주의사항"> <a href="#3-주의사항" class="anchor-heading" aria-labelledby="3-주의사항"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 3. 주의사항 </h3> <ul> <li><strong>Servlet 필터 매핑 금지</strong>: WebFlux 애플리케이션에서 Servlet 필터 매핑 금지</li> <li><strong>Servlet API 직접 조작 금지</strong>: 블로킹 I/O와 논블로킹 I/O 혼합 시 런타임 이슈 발생</li> <li><strong>Spring Boot 기본값</strong>: Netty를 기본으로 사용 (비동기, 논블로킹 공간에서 널리 사용)</li> </ul> <h2 id="netty-vs-tomcat-서버-비교"> <a href="#netty-vs-tomcat-서버-비교" class="anchor-heading" aria-labelledby="netty-vs-tomcat-서버-비교"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Netty vs Tomcat 서버 비교 </h2> <h3 id="1-아키텍처-차이점"> <a href="#1-아키텍처-차이점" class="anchor-heading" aria-labelledby="1-아키텍처-차이점"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1. 아키텍처 차이점 </h3><pre><code class="language-mermaid">graph TB
    subgraph "Tomcat (Servlet Container)"
        TomcatRequest[HTTP Request] --&gt; TomcatConnector[Connector]
        TomcatConnector --&gt; TomcatThreadPool[Thread Pool&lt;br/&gt;Request-per-Thread]
        TomcatThreadPool --&gt; TomcatServlet[Servlet Container]
        TomcatServlet --&gt; TomcatApp[Spring MVC Application]
        TomcatApp --&gt; TomcatResponse[HTTP Response]
    end

    subgraph "Netty (Event Loop)"
        NettyRequest[HTTP Request] --&gt; NettyEventLoop[Event Loop]
        NettyEventLoop --&gt; NettyChannel[Channel Pipeline]
        NettyChannel --&gt; NettyHandler[Channel Handler]
        NettyHandler --&gt; NettyApp[Spring WebFlux Application]
        NettyApp --&gt; NettyResponse[HTTP Response]
    end

    style TomcatThreadPool fill:#ffebee
    style NettyEventLoop fill:#e8f5e8
</code></pre><h3 id="2-핵심-차이점"> <a href="#2-핵심-차이점" class="anchor-heading" aria-labelledby="2-핵심-차이점"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 2. 핵심 차이점 </h3> <div class="table-wrapper"><table> <thead> <tr> <th>특성</th> <th>Tomcat</th> <th>Netty</th> </tr> </thead> <tbody> <tr> <td><strong>스레드 모델</strong></td> <td>Thread-per-request</td> <td>Event Loop</td> </tr> <tr> <td><strong>동시성 처리</strong></td> <td>스레드 풀 기반</td> <td>이벤트 루프 기반</td> </tr> <tr> <td><strong>메모리 사용량</strong></td> <td>높음 (스레드당 ~1MB)</td> <td>낮음</td> </tr> <tr> <td><strong>확장성</strong></td> <td>제한적 (스레드 풀 크기)</td> <td>높음</td> </tr> <tr> <td><strong>블로킹 작업</strong></td> <td>적합</td> <td>부적합</td> </tr> <tr> <td><strong>학습 곡선</strong></td> <td>낮음</td> <td>높음</td> </tr> <tr> <td><strong>Servlet API</strong></td> <td>직접 사용</td> <td>사용하지 않음</td> </tr> </tbody> </table></div> <h3 id="3-netty-상세-설명"> <a href="#3-netty-상세-설명" class="anchor-heading" aria-labelledby="3-netty-상세-설명"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 3. Netty 상세 설명 </h3> <h4 id="netty란"> <a href="#netty란" class="anchor-heading" aria-labelledby="netty란"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Netty란? </h4> <p>Netty는 비동기 이벤트 기반 네트워크 애플리케이션 프레임워크로, 고성능 서버와 클라이언트를 빠르고 쉽게 개발할 수 있도록 도와주는 Java 라이브러리입니다.</p> <h4 id="netty의-핵심-구성-요소"> <a href="#netty의-핵심-구성-요소" class="anchor-heading" aria-labelledby="netty의-핵심-구성-요소"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Netty의 핵심 구성 요소 </h4><pre><code class="language-mermaid">graph TB
    subgraph "Netty Architecture"
        Bootstrap[Bootstrap&lt;br/&gt;서버/클라이언트 시작]
        EventLoopGroup[EventLoopGroup&lt;br/&gt;이벤트 루프 그룹]
        Channel[Channel&lt;br/&gt;네트워크 연결]
        ChannelPipeline[ChannelPipeline&lt;br/&gt;핸들러 체인]
        ChannelHandler[ChannelHandler&lt;br/&gt;비즈니스 로직]
    end

    Bootstrap --&gt; EventLoopGroup
    EventLoopGroup --&gt; Channel
    Channel --&gt; ChannelPipeline
    ChannelPipeline --&gt; ChannelHandler

    subgraph "Event Loop Model"
        EventLoop1[Event Loop 1]
        EventLoop2[Event Loop 2]
        EventLoop3[Event Loop 3]
        EventLoop4[Event Loop 4]
    end

    EventLoopGroup --&gt; EventLoop1
    EventLoopGroup --&gt; EventLoop2
    EventLoopGroup --&gt; EventLoop3
    EventLoopGroup --&gt; EventLoop4
</code></pre><h4 id="1-bootstrap"> <a href="#1-bootstrap" class="anchor-heading" aria-labelledby="1-bootstrap"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1. Bootstrap </h4> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// 서버 Bootstrap 예제</span>
<span class="nc">ServerBootstrap</span> <span class="n">bootstrap</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ServerBootstrap</span><span class="o">();</span>
<span class="n">bootstrap</span><span class="o">.</span><span class="na">group</span><span class="o">(</span><span class="n">bossGroup</span><span class="o">,</span> <span class="n">workerGroup</span><span class="o">)</span>
    <span class="o">.</span><span class="na">channel</span><span class="o">(</span><span class="nc">NioServerSocketChannel</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
    <span class="o">.</span><span class="na">childHandler</span><span class="o">(</span><span class="k">new</span> <span class="nc">ChannelInitializer</span><span class="o">&lt;</span><span class="nc">SocketChannel</span><span class="o">&gt;()</span> <span class="o">{</span>
        <span class="nd">@Override</span>
        <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">initChannel</span><span class="o">(</span><span class="nc">SocketChannel</span> <span class="n">ch</span><span class="o">)</span> <span class="o">{</span>
            <span class="nc">ChannelPipeline</span> <span class="n">pipeline</span> <span class="o">=</span> <span class="n">ch</span><span class="o">.</span><span class="na">pipeline</span><span class="o">();</span>
            <span class="n">pipeline</span><span class="o">.</span><span class="na">addLast</span><span class="o">(</span><span class="k">new</span> <span class="nc">HttpServerCodec</span><span class="o">());</span>
            <span class="n">pipeline</span><span class="o">.</span><span class="na">addLast</span><span class="o">(</span><span class="k">new</span> <span class="nc">HttpObjectAggregator</span><span class="o">(</span><span class="mi">65536</span><span class="o">));</span>
            <span class="n">pipeline</span><span class="o">.</span><span class="na">addLast</span><span class="o">(</span><span class="k">new</span> <span class="nc">CustomHandler</span><span class="o">());</span>
        <span class="o">}</span>
    <span class="o">});</span>
</code></pre></div></div> <h4 id="2-eventloopgroup"> <a href="#2-eventloopgroup" class="anchor-heading" aria-labelledby="2-eventloopgroup"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 2. EventLoopGroup </h4> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// 이벤트 루프 그룹 설정</span>
<span class="nc">EventLoopGroup</span> <span class="n">bossGroup</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">NioEventLoopGroup</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>    <span class="c1">// 연결 수락용</span>
<span class="nc">EventLoopGroup</span> <span class="n">workerGroup</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">NioEventLoopGroup</span><span class="o">();</span>   <span class="c1">// 요청 처리용</span>

<span class="c1">// CPU 코어 수에 따른 최적화</span>
<span class="kt">int</span> <span class="n">cores</span> <span class="o">=</span> <span class="nc">Runtime</span><span class="o">.</span><span class="na">getRuntime</span><span class="o">().</span><span class="na">availableProcessors</span><span class="o">();</span>
<span class="nc">EventLoopGroup</span> <span class="n">workerGroup</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">NioEventLoopGroup</span><span class="o">(</span><span class="n">cores</span><span class="o">);</span>
</code></pre></div></div> <h4 id="3-channel과-channelpipeline"> <a href="#3-channel과-channelpipeline" class="anchor-heading" aria-labelledby="3-channel과-channelpipeline"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 3. Channel과 ChannelPipeline </h4> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// 채널 파이프라인 구성</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">CustomChannelInitializer</span> <span class="kd">extends</span> <span class="nc">ChannelInitializer</span><span class="o">&lt;</span><span class="nc">SocketChannel</span><span class="o">&gt;</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">initChannel</span><span class="o">(</span><span class="nc">SocketChannel</span> <span class="n">ch</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">ChannelPipeline</span> <span class="n">pipeline</span> <span class="o">=</span> <span class="n">ch</span><span class="o">.</span><span class="na">pipeline</span><span class="o">();</span>

        <span class="c1">// HTTP 코덱 추가</span>
        <span class="n">pipeline</span><span class="o">.</span><span class="na">addLast</span><span class="o">(</span><span class="s">"httpCodec"</span><span class="o">,</span> <span class="k">new</span> <span class="nc">HttpServerCodec</span><span class="o">());</span>
        <span class="n">pipeline</span><span class="o">.</span><span class="na">addLast</span><span class="o">(</span><span class="s">"httpAggregator"</span><span class="o">,</span> <span class="k">new</span> <span class="nc">HttpObjectAggregator</span><span class="o">(</span><span class="mi">65536</span><span class="o">));</span>

        <span class="c1">// 커스텀 핸들러 추가</span>
        <span class="n">pipeline</span><span class="o">.</span><span class="na">addLast</span><span class="o">(</span><span class="s">"customHandler"</span><span class="o">,</span> <span class="k">new</span> <span class="nc">CustomHttpHandler</span><span class="o">());</span>

        <span class="c1">// 압축 핸들러 추가</span>
        <span class="n">pipeline</span><span class="o">.</span><span class="na">addLast</span><span class="o">(</span><span class="s">"deflater"</span><span class="o">,</span> <span class="k">new</span> <span class="nc">HttpContentCompressor</span><span class="o">());</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <h4 id="4-channelhandler"> <a href="#4-channelhandler" class="anchor-heading" aria-labelledby="4-channelhandler"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 4. ChannelHandler </h4> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// 커스텀 HTTP 핸들러 예제</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">CustomHttpHandler</span> <span class="kd">extends</span> <span class="nc">SimpleChannelInboundHandler</span><span class="o">&lt;</span><span class="nc">FullHttpRequest</span><span class="o">&gt;</span> <span class="o">{</span>

    <span class="nd">@Override</span>
    <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">channelRead0</span><span class="o">(</span><span class="nc">ChannelHandlerContext</span> <span class="n">ctx</span><span class="o">,</span> <span class="nc">FullHttpRequest</span> <span class="n">request</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// HTTP 요청 처리</span>
        <span class="nc">FullHttpResponse</span> <span class="n">response</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">DefaultFullHttpResponse</span><span class="o">(</span>
            <span class="nc">HttpVersion</span><span class="o">.</span><span class="na">HTTP_1_1</span><span class="o">,</span>
            <span class="nc">HttpResponseStatus</span><span class="o">.</span><span class="na">OK</span><span class="o">,</span>
            <span class="nc">Unpooled</span><span class="o">.</span><span class="na">copiedBuffer</span><span class="o">(</span><span class="s">"Hello, Netty!"</span><span class="o">,</span> <span class="nc">CharsetUtil</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">)</span>
        <span class="o">);</span>

        <span class="n">response</span><span class="o">.</span><span class="na">headers</span><span class="o">().</span><span class="na">set</span><span class="o">(</span><span class="nc">HttpHeaderNames</span><span class="o">.</span><span class="na">CONTENT_TYPE</span><span class="o">,</span> <span class="s">"text/plain"</span><span class="o">);</span>
        <span class="n">response</span><span class="o">.</span><span class="na">headers</span><span class="o">().</span><span class="na">set</span><span class="o">(</span><span class="nc">HttpHeaderNames</span><span class="o">.</span><span class="na">CONTENT_LENGTH</span><span class="o">,</span> <span class="n">response</span><span class="o">.</span><span class="na">content</span><span class="o">().</span><span class="na">readableBytes</span><span class="o">());</span>

        <span class="n">ctx</span><span class="o">.</span><span class="na">writeAndFlush</span><span class="o">(</span><span class="n">response</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">exceptionCaught</span><span class="o">(</span><span class="nc">ChannelHandlerContext</span> <span class="n">ctx</span><span class="o">,</span> <span class="nc">Throwable</span> <span class="n">cause</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">cause</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="n">ctx</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <h3 id="4-netty의-이벤트-루프-모델"> <a href="#4-netty의-이벤트-루프-모델" class="anchor-heading" aria-labelledby="4-netty의-이벤트-루프-모델"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 4. Netty의 이벤트 루프 모델 </h3><pre><code class="language-mermaid">graph TB
    subgraph "Event Loop Processing"
        Accept[Accept Event&lt;br/&gt;연결 수락]
        Read[Read Event&lt;br/&gt;데이터 읽기]
        Process[Process Event&lt;br/&gt;비즈니스 로직]
        Write[Write Event&lt;br/&gt;응답 쓰기]
    end

    subgraph "Non-blocking I/O"
        NIO[NIO Channels]
        Selector[Selector&lt;br/&gt;이벤트 선택]
        Buffer[ByteBuffer&lt;br/&gt;데이터 버퍼]
    end

    Accept --&gt; Read
    Read --&gt; Process
    Process --&gt; Write

    NIO --&gt; Selector
    Selector --&gt; Buffer
</code></pre><h4 id="이벤트-루프-동작-원리"> <a href="#이벤트-루프-동작-원리" class="anchor-heading" aria-labelledby="이벤트-루프-동작-원리"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 이벤트 루프 동작 원리 </h4> <ol> <li><strong>연결 수락</strong>: 클라이언트 연결을 수락하고 새로운 Channel 생성</li> <li><strong>이벤트 등록</strong>: Channel을 Selector에 등록하여 관심 이벤트 모니터링</li> <li><strong>이벤트 처리</strong>: Selector가 준비된 이벤트를 감지하면 해당 Channel의 핸들러 호출</li> <li><strong>비동기 처리</strong>: 블로킹 없이 이벤트를 순차적으로 처리</li> </ol> <h3 id="5-netty의-장점"> <a href="#5-netty의-장점" class="anchor-heading" aria-labelledby="5-netty의-장점"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 5. Netty의 장점 </h3> <h4 id="1-높은-성능"> <a href="#1-높은-성능" class="anchor-heading" aria-labelledby="1-높은-성능"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1. 높은 성능 </h4> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Netty의 비동기 처리 예제</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">AsyncHandler</span> <span class="kd">extends</span> <span class="nc">SimpleChannelInboundHandler</span><span class="o">&lt;</span><span class="nc">HttpRequest</span><span class="o">&gt;</span> <span class="o">{</span>

    <span class="nd">@Override</span>
    <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">channelRead0</span><span class="o">(</span><span class="nc">ChannelHandlerContext</span> <span class="n">ctx</span><span class="o">,</span> <span class="nc">HttpRequest</span> <span class="n">request</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// 비동기 데이터베이스 조회</span>
        <span class="nc">CompletableFuture</span><span class="o">.</span><span class="na">supplyAsync</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
            <span class="k">return</span> <span class="n">databaseService</span><span class="o">.</span><span class="na">query</span><span class="o">(</span><span class="n">request</span><span class="o">.</span><span class="na">getUri</span><span class="o">());</span>
        <span class="o">}).</span><span class="na">thenAccept</span><span class="o">(</span><span class="n">result</span> <span class="o">-&gt;</span> <span class="o">{</span>
            <span class="c1">// 결과를 비동기로 응답</span>
            <span class="n">ctx</span><span class="o">.</span><span class="na">writeAndFlush</span><span class="o">(</span><span class="n">createResponse</span><span class="o">(</span><span class="n">result</span><span class="o">));</span>
        <span class="o">});</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <h4 id="2-메모리-효율성"> <a href="#2-메모리-효율성" class="anchor-heading" aria-labelledby="2-메모리-효율성"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 2. 메모리 효율성 </h4> <ul> <li><strong>적은 스레드</strong>: CPU 코어 수만큼의 이벤트 루프 스레드</li> <li><strong>낮은 메모리 사용량</strong>: 스레드당 메모리 사용량이 적음</li> <li><strong>버퍼 풀링</strong>: ByteBuf 풀링으로 메모리 재사용</li> </ul> <h4 id="3-확장성"> <a href="#3-확장성" class="anchor-heading" aria-labelledby="3-확장성"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 3. 확장성 </h4> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// 수천 개의 동시 연결 처리</span>
<span class="nc">ServerBootstrap</span> <span class="n">bootstrap</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ServerBootstrap</span><span class="o">();</span>
<span class="n">bootstrap</span><span class="o">.</span><span class="na">group</span><span class="o">(</span><span class="n">bossGroup</span><span class="o">,</span> <span class="n">workerGroup</span><span class="o">)</span>
    <span class="o">.</span><span class="na">channel</span><span class="o">(</span><span class="nc">NioServerSocketChannel</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
    <span class="o">.</span><span class="na">option</span><span class="o">(</span><span class="nc">ChannelOption</span><span class="o">.</span><span class="na">SO_BACKLOG</span><span class="o">,</span> <span class="mi">10000</span><span class="o">)</span>  <span class="c1">// 백로그 큐 크기</span>
    <span class="o">.</span><span class="na">childOption</span><span class="o">(</span><span class="nc">ChannelOption</span><span class="o">.</span><span class="na">SO_KEEPALIVE</span><span class="o">,</span> <span class="kc">true</span><span class="o">)</span>
    <span class="o">.</span><span class="na">childOption</span><span class="o">(</span><span class="nc">ChannelOption</span><span class="o">.</span><span class="na">TCP_NODELAY</span><span class="o">,</span> <span class="kc">true</span><span class="o">);</span>
</code></pre></div></div> <h3 id="6-spring-webflux에서의-netty-사용"> <a href="#6-spring-webflux에서의-netty-사용" class="anchor-heading" aria-labelledby="6-spring-webflux에서의-netty-사용"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 6. Spring WebFlux에서의 Netty 사용 </h3> <h4 id="1-spring-boot-webflux-기본-설정"> <a href="#1-spring-boot-webflux-기본-설정" class="anchor-heading" aria-labelledby="1-spring-boot-webflux-기본-설정"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1. Spring Boot WebFlux 기본 설정 </h4> <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># application.yml</span>
<span class="na">spring</span><span class="pi">:</span>
  <span class="na">webflux</span><span class="pi">:</span>
    <span class="na">base-path</span><span class="pi">:</span> <span class="s">/api</span>

<span class="c1"># Netty 설정</span>
<span class="na">netty</span><span class="pi">:</span>
  <span class="na">connection-timeout</span><span class="pi">:</span> <span class="s">30s</span>
  <span class="na">read-timeout</span><span class="pi">:</span> <span class="s">30s</span>
  <span class="na">write-timeout</span><span class="pi">:</span> <span class="s">30s</span>
</code></pre></div></div> <h4 id="2-netty-커스텀-설정"> <a href="#2-netty-커스텀-설정" class="anchor-heading" aria-labelledby="2-netty-커스텀-설정"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 2. Netty 커스텀 설정 </h4> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Configuration</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">NettyConfig</span> <span class="o">{</span>

    <span class="nd">@Bean</span>
    <span class="kd">public</span> <span class="nc">NettyReactiveWebServerFactory</span> <span class="nf">nettyReactiveWebServerFactory</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">NettyReactiveWebServerFactory</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="nc">WebServer</span> <span class="nf">getWebServer</span><span class="o">(</span><span class="nc">HttpHandler</span> <span class="n">httpHandler</span><span class="o">)</span> <span class="o">{</span>
                <span class="nc">HttpServer</span> <span class="n">httpServer</span> <span class="o">=</span> <span class="nc">HttpServer</span><span class="o">.</span><span class="na">create</span><span class="o">()</span>
                    <span class="o">.</span><span class="na">port</span><span class="o">(</span><span class="mi">8080</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">option</span><span class="o">(</span><span class="nc">ChannelOption</span><span class="o">.</span><span class="na">SO_BACKLOG</span><span class="o">,</span> <span class="mi">1000</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">option</span><span class="o">(</span><span class="nc">ChannelOption</span><span class="o">.</span><span class="na">SO_REUSEADDR</span><span class="o">,</span> <span class="kc">true</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">childOption</span><span class="o">(</span><span class="nc">ChannelOption</span><span class="o">.</span><span class="na">SO_KEEPALIVE</span><span class="o">,</span> <span class="kc">true</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">childOption</span><span class="o">(</span><span class="nc">ChannelOption</span><span class="o">.</span><span class="na">TCP_NODELAY</span><span class="o">,</span> <span class="kc">true</span><span class="o">);</span>

                <span class="k">return</span> <span class="kd">super</span><span class="o">.</span><span class="na">getWebServer</span><span class="o">(</span><span class="n">httpHandler</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">};</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <h4 id="3-netty-이벤트-루프-모니터링"> <a href="#3-netty-이벤트-루프-모니터링" class="anchor-heading" aria-labelledby="3-netty-이벤트-루프-모니터링"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 3. Netty 이벤트 루프 모니터링 </h4> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Component</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">NettyMetrics</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">MeterRegistry</span> <span class="n">meterRegistry</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">NettyMetrics</span><span class="o">(</span><span class="nc">MeterRegistry</span> <span class="n">meterRegistry</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">meterRegistry</span> <span class="o">=</span> <span class="n">meterRegistry</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@EventListener</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">handleNettyEvent</span><span class="o">(</span><span class="nc">NettyEvent</span> <span class="n">event</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// Netty 이벤트 메트릭 수집</span>
        <span class="nc">Timer</span><span class="o">.</span><span class="na">Sample</span> <span class="n">sample</span> <span class="o">=</span> <span class="nc">Timer</span><span class="o">.</span><span class="na">start</span><span class="o">(</span><span class="n">meterRegistry</span><span class="o">);</span>

        <span class="n">event</span><span class="o">.</span><span class="na">getChannel</span><span class="o">().</span><span class="na">closeFuture</span><span class="o">().</span><span class="na">addListener</span><span class="o">(</span><span class="n">future</span> <span class="o">-&gt;</span> <span class="o">{</span>
            <span class="n">sample</span><span class="o">.</span><span class="na">stop</span><span class="o">(</span><span class="nc">Timer</span><span class="o">.</span><span class="na">builder</span><span class="o">(</span><span class="s">"netty.connection.duration"</span><span class="o">)</span>
                <span class="o">.</span><span class="na">tag</span><span class="o">(</span><span class="s">"channel"</span><span class="o">,</span> <span class="n">event</span><span class="o">.</span><span class="na">getChannel</span><span class="o">().</span><span class="na">id</span><span class="o">().</span><span class="na">asLongText</span><span class="o">())</span>
                <span class="o">.</span><span class="na">register</span><span class="o">(</span><span class="n">meterRegistry</span><span class="o">));</span>
        <span class="o">});</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <h3 id="7-tomcat-vs-netty-성능-비교"> <a href="#7-tomcat-vs-netty-성능-비교" class="anchor-heading" aria-labelledby="7-tomcat-vs-netty-성능-비교"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 7. Tomcat vs Netty 성능 비교 </h3><pre><code class="language-mermaid">graph TB
    subgraph "동시 연결 처리"
        TomcatConnections[Tomcat&lt;br/&gt;제한적 (스레드 풀 크기)]
        NettyConnections[Netty&lt;br/&gt;높음 (이벤트 루프)]
    end

    subgraph "메모리 사용량"
        TomcatMemory[Tomcat&lt;br/&gt;높음 (스레드당 ~1MB)]
        NettyMemory[Netty&lt;br/&gt;낮음 (이벤트 루프)]
    end

    subgraph "응답 시간"
        TomcatLatency[Tomcat&lt;br/&gt;일정함]
        NettyLatency[Netty&lt;br/&gt;빠름 (비동기)]
    end

    subgraph "리소스 효율성"
        TomcatEfficiency[Tomcat&lt;br/&gt;낮음]
        NettyEfficiency[Netty&lt;br/&gt;높음]
    end
</code></pre><h3 id="8-언제-어떤-서버를-선택할까"> <a href="#8-언제-어떤-서버를-선택할까" class="anchor-heading" aria-labelledby="8-언제-어떤-서버를-선택할까"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 8. 언제 어떤 서버를 선택할까? </h3> <h4 id="netty를-선택해야-하는-경우"> <a href="#netty를-선택해야-하는-경우" class="anchor-heading" aria-labelledby="netty를-선택해야-하는-경우"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Netty를 선택해야 하는 경우: </h4> <ul> <li><strong>고성능 요구</strong>: 대용량 트래픽 처리 필요</li> <li><strong>실시간 애플리케이션</strong>: WebSocket, Server-Sent Events 사용</li> <li><strong>마이크로서비스</strong>: Spring Cloud Gateway와 함께 사용</li> <li><strong>IoT 애플리케이션</strong>: 많은 동시 연결 처리</li> <li><strong>리소스 제약</strong>: 제한된 메모리와 CPU 환경</li> </ul> <h4 id="tomcat을-선택해야-하는-경우"> <a href="#tomcat을-선택해야-하는-경우" class="anchor-heading" aria-labelledby="tomcat을-선택해야-하는-경우"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Tomcat을 선택해야 하는 경우: </h4> <ul> <li><strong>기존 Spring MVC</strong>: 이미 Servlet 기반 애플리케이션</li> <li><strong>블로킹 작업</strong>: 많은 블로킹 I/O 작업</li> <li><strong>팀 역량</strong>: Netty 학습 곡선이 높음</li> <li><strong>안정성</strong>: 검증된 Servlet 컨테이너</li> <li><strong>서드파티 라이브러리</strong>: 블로킹 라이브러리 의존성</li> </ul> <h3 id="9-마이그레이션-전략"> <a href="#9-마이그레이션-전략" class="anchor-heading" aria-labelledby="9-마이그레이션-전략"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 9. 마이그레이션 전략 </h3> <h4 id="tomcat에서-netty로-전환"> <a href="#tomcat에서-netty로-전환" class="anchor-heading" aria-labelledby="tomcat에서-netty로-전환"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Tomcat에서 Netty로 전환: </h4> <ol> <li><strong>점진적 전환</strong>: 새로운 기능은 WebFlux + Netty로 구현</li> <li><strong>하이브리드 접근</strong>: 기존 MVC는 Tomcat, 새로운 API는 Netty</li> <li><strong>성능 테스트</strong>: 각 단계에서 성능 측정</li> <li><strong>팀 교육</strong>: Netty와 리액티브 프로그래밍 학습</li> </ol> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// 하이브리드 설정 예제</span>
<span class="nd">@Configuration</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">HybridConfig</span> <span class="o">{</span>

    <span class="nd">@Bean</span>
    <span class="nd">@ConditionalOnProperty</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"server.type"</span><span class="o">,</span> <span class="n">havingValue</span> <span class="o">=</span> <span class="s">"tomcat"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="nc">TomcatServletWebServerFactory</span> <span class="nf">tomcatFactory</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">TomcatServletWebServerFactory</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="nd">@Bean</span>
    <span class="nd">@ConditionalOnProperty</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"server.type"</span><span class="o">,</span> <span class="n">havingValue</span> <span class="o">=</span> <span class="s">"netty"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="nc">NettyReactiveWebServerFactory</span> <span class="nf">nettyFactory</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">NettyReactiveWebServerFactory</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <h3 id="10-결론"> <a href="#10-결론" class="anchor-heading" aria-labelledby="10-결론"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 10. 결론 </h3> <p>Netty는 현대적인 고성능 웹 애플리케이션에 최적화된 서버로, 이벤트 루프 모델을 통해 높은 동시성과 낮은 메모리 사용량을 제공합니다. Spring WebFlux와 함께 사용할 때 특히 강력한 조합을 만들어내며, 대용량 트래픽 처리와 실시간 애플리케이션에 이상적입니다.</p> <p>하지만 모든 상황에서 Netty가 최선의 선택은 아니므로, 프로젝트의 요구사항, 팀의 기술 역량, 그리고 기존 인프라를 고려하여 신중하게 선택해야 합니다.</p> <h2 id="성능-특성"> <a href="#성능-특성" class="anchor-heading" aria-labelledby="성능-특성"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 성능 특성 </h2> <h3 id="1-성능의-의미"> <a href="#1-성능의-의미" class="anchor-heading" aria-labelledby="1-성능의-의미"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1. 성능의 의미 </h3> <ul> <li><strong>실행 속도</strong>: 반응형과 논블로킹이 항상 애플리케이션을 더 빠르게 만들지는 않음</li> <li><strong>병렬 처리</strong>: WebClient로 원격 호출을 병렬로 실행하는 경우 등 일부 경우에만 속도 향상</li> <li><strong>처리 시간</strong>: 논블로킹 방식은 더 많은 작업이 필요하여 처리 시간이 약간 증가할 수 있음</li> </ul> <h3 id="2-주요-이점"> <a href="#2-주요-이점" class="anchor-heading" aria-labelledby="2-주요-이점"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 2. 주요 이점 </h3><pre><code class="language-mermaid">graph TB
    subgraph "확장성 이점"
        Threads[적은 수의 고정 스레드]
        Memory[적은 메모리 사용량]
        Predictable[예측 가능한 확장]
        Resilient[부하 하에서 견고함]
    end

    subgraph "적용 조건"
        Latency[지연 시간 필요]
        Network[느리고 예측 불가능한 네트워크 I/O]
        Mixed[혼합된 지연 시간]
    end

    Threads --&gt; Latency
    Memory --&gt; Network
    Predictable --&gt; Mixed
    Resilient --&gt; Latency
</code></pre><h3 id="3-동시성-모델"> <a href="#3-동시성-모델" class="anchor-heading" aria-labelledby="3-동시성-모델"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 3. 동시성 모델 </h3> <h4 id="spring-mvc-servlet-애플리케이션"> <a href="#spring-mvc-servlet-애플리케이션" class="anchor-heading" aria-labelledby="spring-mvc-servlet-애플리케이션"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Spring MVC (Servlet 애플리케이션): </h4> <ul> <li><strong>블로킹 가정</strong>: 애플리케이션이 현재 스레드를 블로킹할 수 있다고 가정</li> <li><strong>대용량 스레드 풀</strong>: 요청 처리 중 잠재적 블로킹을 흡수하기 위해 대용량 스레드 풀 사용</li> </ul> <h4 id="spring-webflux-논블로킹-서버"> <a href="#spring-webflux-논블로킹-서버" class="anchor-heading" aria-labelledby="spring-webflux-논블로킹-서버"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Spring WebFlux (논블로킹 서버): </h4> <ul> <li><strong>논블로킹 가정</strong>: 애플리케이션이 블로킹하지 않는다고 가정</li> <li><strong>작은 고정 크기 스레드 풀</strong>: 이벤트 루프 워커를 사용하여 요청 처리</li> <li><strong>콜백 의존</strong>: 현재 스레드를 절대 블로킹하지 않고 콜백에 의존</li> </ul> <h3 id="4-블로킹-api-호출"> <a href="#4-블로킹-api-호출" class="anchor-heading" aria-labelledby="4-블로킹-api-호출"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 4. 블로킹 API 호출 </h3> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Reactor와 RxJava의 publishOn 연산자 사용</span>
<span class="nc">Flux</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="n">blockingApiCall</span><span class="o">()</span>
    <span class="o">.</span><span class="na">publishOn</span><span class="o">(</span><span class="nc">Schedulers</span><span class="o">.</span><span class="na">elastic</span><span class="o">())</span> <span class="c1">// 다른 스레드에서 처리</span>
    <span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="n">data</span> <span class="o">-&gt;</span> <span class="n">processData</span><span class="o">(</span><span class="n">data</span><span class="o">));</span>
</code></pre></div></div> <ul> <li><strong>publishOn 연산자</strong>: 다른 스레드에서 처리 계속</li> <li><strong>쉬운 탈출구</strong>: 블로킹 라이브러리 사용 시 쉬운 해결책 제공</li> <li><strong>적합하지 않음</strong>: 블로킹 API는 이 동시성 모델에 적합하지 않음</li> </ul> <h2 id="스레딩-모델"> <a href="#스레딩-모델" class="anchor-heading" aria-labelledby="스레딩-모델"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 스레딩 모델 </h2> <h3 id="1-예상되는-스레드"> <a href="#1-예상되는-스레드" class="anchor-heading" aria-labelledby="1-예상되는-스레드"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1. 예상되는 스레드 </h3> <h4 id="바닐라-spring-webflux-서버"> <a href="#바닐라-spring-webflux-서버" class="anchor-heading" aria-labelledby="바닐라-spring-webflux-서버"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> “바닐라” Spring WebFlux 서버: </h4> <ul> <li><strong>서버 스레드</strong>: 1개</li> <li><strong>요청 처리 스레드</strong>: CPU 코어 수만큼 (일반적으로)</li> </ul> <h4 id="servlet-컨테이너"> <a href="#servlet-컨테이너" class="anchor-heading" aria-labelledby="servlet-컨테이너"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Servlet 컨테이너: </h4> <ul> <li><strong>더 많은 스레드</strong>: Tomcat의 경우 10개 등</li> <li><strong>Servlet 블로킹 I/O</strong>: 지원</li> <li><strong>Servlet 3.1 논블로킹 I/O</strong>: 지원</li> </ul> <h3 id="2-webclient-스레딩"> <a href="#2-webclient-스레딩" class="anchor-heading" aria-labelledby="2-webclient-스레딩"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 2. WebClient 스레딩 </h3><pre><code class="language-mermaid">graph TB
    subgraph "WebClient 이벤트 루프"
        EventLoop[이벤트 루프 스타일]
        ProcessingThreads[작은 고정 수의 처리 스레드]
        ReactorNetty[reactor-http-nio- 스레드]
    end

    subgraph "공유 리소스"
        ClientServer[클라이언트와 서버 공유]
        EventLoopResources[이벤트 루프 리소스 공유]
    end

    EventLoop --&gt; ProcessingThreads
    ProcessingThreads --&gt; ReactorNetty
    ClientServer --&gt; EventLoopResources
</code></pre><h3 id="3-스케줄러"> <a href="#3-스케줄러" class="anchor-heading" aria-labelledby="3-스케줄러"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 3. 스케줄러 </h3> <ul> <li><strong>parallel</strong>: CPU 바운드 작업용 제한된 스레드 수</li> <li><strong>elastic</strong>: I/O 바운드 작업용 대용량 스레드 수</li> <li><strong>특정 스레드 풀 전략</strong>: 스케줄러 이름으로 특정 동시성 전략 제안</li> </ul> <h3 id="4-가변-상태"> <a href="#4-가변-상태" class="anchor-heading" aria-labelledby="4-가변-상태"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 4. 가변 상태 </h3> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Reactor와 RxJava에서 연산자를 통해 로직 선언</span>
<span class="c1">// 런타임에 리액티브 파이프라인 형성</span>
<span class="c1">// 애플리케이션 코드는 동시에 호출되지 않음</span>
<span class="nc">Flux</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">pipeline</span> <span class="o">=</span> <span class="n">source</span>
    <span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="n">data</span> <span class="o">-&gt;</span> <span class="n">process</span><span class="o">(</span><span class="n">data</span><span class="o">))</span>
    <span class="o">.</span><span class="na">filter</span><span class="o">(</span><span class="n">data</span> <span class="o">-&gt;</span> <span class="n">validate</span><span class="o">(</span><span class="n">data</span><span class="o">))</span>
    <span class="o">.</span><span class="na">doOnNext</span><span class="o">(</span><span class="n">data</span> <span class="o">-&gt;</span> <span class="n">log</span><span class="o">(</span><span class="n">data</span><span class="o">));</span>
</code></pre></div></div> <ul> <li><strong>순차적 처리</strong>: 데이터가 순차적으로, 구별된 단계에서 처리</li> <li><strong>가변 상태 보호 불필요</strong>: 파이프라인 내 애플리케이션 코드는 동시에 호출되지 않음</li> </ul> <h2 id="설정"> <a href="#설정" class="anchor-heading" aria-labelledby="설정"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 설정 </h2> <h3 id="1-서버-설정"> <a href="#1-서버-설정" class="anchor-heading" aria-labelledby="1-서버-설정"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1. 서버 설정 </h3> <ul> <li><strong>Spring Framework</strong>: 서버 시작/중지 지원 없음</li> <li><strong>서버별 설정 API</strong>: 서버별 설정 API 사용 필요</li> <li><strong>Spring Boot</strong>: 각 서버의 Spring Boot 설정 옵션 확인</li> </ul> <h3 id="2-webclient-설정"> <a href="#2-webclient-설정" class="anchor-heading" aria-labelledby="2-webclient-설정"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 2. WebClient 설정 </h3> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Configuration</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">WebClientConfig</span> <span class="o">{</span>

    <span class="nd">@Bean</span>
    <span class="kd">public</span> <span class="nc">WebClient</span> <span class="nf">webClient</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="nc">WebClient</span><span class="o">.</span><span class="na">builder</span><span class="o">()</span>
            <span class="o">.</span><span class="na">baseUrl</span><span class="o">(</span><span class="s">"https://api.example.com"</span><span class="o">)</span>
            <span class="o">.</span><span class="na">defaultHeader</span><span class="o">(</span><span class="nc">HttpHeaders</span><span class="o">.</span><span class="na">CONTENT_TYPE</span><span class="o">,</span> <span class="nc">MediaType</span><span class="o">.</span><span class="na">APPLICATION_JSON_VALUE</span><span class="o">)</span>
            <span class="o">.</span><span class="na">build</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <h3 id="3-기타-라이브러리"> <a href="#3-기타-라이브러리" class="anchor-heading" aria-labelledby="3-기타-라이브러리"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 3. 기타 라이브러리 </h3> <ul> <li><strong>데이터 액세스 라이브러리</strong>: 자체 스레드 생성 및 사용</li> <li><strong>서드파티 의존성</strong>: 각각의 문서 참조</li> </ul> <h2 id="결론"> <a href="#결론" class="anchor-heading" aria-labelledby="결론"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 결론 </h2> <p>Spring WebFlux는 현대적인 웹 애플리케이션에서 높은 성능과 확장성을 요구하는 시스템에 적합한 프레임워크입니다. 특히 다음과 같은 상황에서 큰 장점을 보입니다:</p> <h3 id="적합한-사용-사례"> <a href="#적합한-사용-사례" class="anchor-heading" aria-labelledby="적합한-사용-사례"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 적합한 사용 사례: </h3> <ul> <li><strong>대용량 트래픽 처리</strong>: 이벤트 루프 모델로 높은 동시성 지원</li> <li><strong>실시간 데이터 스트리밍</strong>: Server-Sent Events, WebSocket 지원</li> <li><strong>마이크로서비스 게이트웨이</strong>: Spring Cloud Gateway의 기반</li> <li><strong>IoT 데이터 처리</strong>: 센서 데이터의 실시간 처리</li> <li><strong>실시간 채팅 시스템</strong>: WebSocket을 통한 양방향 통신</li> <li><strong>고성능 API 서버</strong>: 대용량 트래픽을 처리하는 REST API</li> </ul> <h3 id="기술-선택-가이드"> <a href="#기술-선택-가이드" class="anchor-heading" aria-labelledby="기술-선택-가이드"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 기술 선택 가이드: </h3> <h4 id="webflux를-선택해야-하는-경우"> <a href="#webflux를-선택해야-하는-경우" class="anchor-heading" aria-labelledby="webflux를-선택해야-하는-경우"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> WebFlux를 선택해야 하는 경우: </h4> <ul> <li><strong>높은 동시성 요구</strong>: 초당 수만 개의 요청을 처리해야 하는 경우</li> <li><strong>실시간 데이터 처리</strong>: 실시간 스트리밍이나 이벤트 기반 아키텍처</li> <li><strong>마이크로서비스 환경</strong>: Spring Cloud Gateway와 함께 사용</li> <li><strong>메모리 효율성</strong>: 제한된 리소스 환경에서 최대 성능 필요</li> </ul> <h4 id="spring-mvc를-선택해야-하는-경우-1"> <a href="#spring-mvc를-선택해야-하는-경우-1" class="anchor-heading" aria-labelledby="spring-mvc를-선택해야-하는-경우-1"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Spring MVC를 선택해야 하는 경우: </h4> <ul> <li><strong>기존 코드베이스</strong>: 이미 동기식 코드로 구성된 프로젝트</li> <li><strong>간단한 CRUD 애플리케이션</strong>: 복잡한 비동기 처리가 필요 없는 경우</li> <li><strong>팀 역량</strong>: 리액티브 프로그래밍 경험이 부족한 팀</li> <li><strong>서드파티 라이브러리 의존성</strong>: 블로킹 라이브러리를 많이 사용하는 경우</li> </ul> <h3 id="성능-고려사항"> <a href="#성능-고려사항" class="anchor-heading" aria-labelledby="성능-고려사항"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 성능 고려사항: </h3><pre><code class="language-mermaid">graph TB
    subgraph "성능 비교"
        MVC[Spring MVC&lt;br/&gt;Thread-per-request]
        WebFlux[WebFlux&lt;br/&gt;Event Loop]
    end

    subgraph "메모리 사용량"
        MVCMemory[높음&lt;br/&gt;스레드당 ~1MB]
        WebFluxMemory[낮음&lt;br/&gt;이벤트 루프]
    end

    subgraph "동시성"
        MVCConcurrency[제한적&lt;br/&gt;스레드 풀 크기]
        WebFluxConcurrency[높음&lt;br/&gt;이벤트 루프]
    end

    MVC --&gt; MVCMemory
    WebFlux --&gt; WebFluxMemory
    MVC --&gt; MVCConcurrency
    WebFlux --&gt; WebFluxConcurrency
</code></pre><h3 id="학습-로드맵"> <a href="#학습-로드맵" class="anchor-heading" aria-labelledby="학습-로드맵"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 학습 로드맵: </h3> <ol> <li><strong>기초 단계</strong>: Reactive Streams 스펙 이해, Mono와 Flux 개념 학습</li> <li><strong>중급 단계</strong>: WebFlux 컨트롤러 구현, WebClient 사용법, 백프레셔 처리</li> <li><strong>고급 단계</strong>: 복잡한 리액티브 스트림 조합, 성능 최적화 및 모니터링</li> </ol> <h3 id="마이그레이션-전략"> <a href="#마이그레이션-전략" class="anchor-heading" aria-labelledby="마이그레이션-전략"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 마이그레이션 전략: </h3> <p>기존 Spring MVC 애플리케이션을 WebFlux로 마이그레이션할 때는 점진적 접근이 권장됩니다:</p> <ol> <li><strong>하이브리드 접근</strong>: MVC와 WebFlux를 함께 사용</li> <li><strong>새로운 기능</strong>: 새로운 기능은 WebFlux로 구현</li> <li><strong>점진적 전환</strong>: 기존 코드를 단계적으로 리팩토링</li> <li><strong>성능 테스트</strong>: 각 단계에서 성능 측정 및 검증</li> </ol> <p>WebFlux의 학습 곡선이 높고, 모든 상황에서 적합하지 않을 수 있으므로, 프로젝트의 요구사항을 잘 분석하여 적절한 기술을 선택하는 것이 중요합니다. 특히 팀의 기술 역량과 프로젝트의 복잡성을 고려한 신중한 결정이 필요합니다.</p> </main> </div> </div> <div class="search-overlay"></div> </div> <script type="module"> import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.esm.min.mjs'; var config = {} ; mermaid.initialize(config); mermaid.run({ querySelector: '.language-mermaid', }); </script> </body> </html>
